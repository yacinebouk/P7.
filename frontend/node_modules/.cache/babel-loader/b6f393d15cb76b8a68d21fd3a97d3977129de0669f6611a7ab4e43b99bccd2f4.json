{"ast":null,"code":"var _jsxFileName = \"/home/yacboukhari/Projects/P7./frontend/src/pages/Profile.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, React } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport NavBar from \"../components/NavBar\";\nimport UserProfile from \"../components/profil/UserProfile\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  useEffect(() => {\n    // Utilisation du hook d'effet en enlevant la classe non voulue au body au profit d'une nouvelle classe.\n    document.body.classList.remove(\"login\", \"signup\");\n    document.body.classList.add(\"dashboard\", \"profile\");\n  }, []);\n\n  // vérification de la connection utilisateur\n  const [isAuth, setIsAuth] = useState(true);\n  useEffect(() => {\n    const isLogged = async () => {\n      await axios({\n        method: \"get\",\n        url: `${process.env.REACT_APP_API_URL}/jwtid`,\n        withCredentials: true\n      }).then(res => {\n        if (res.status === 200) {\n          setIsAuth(isAuth);\n        }\n      }).catch(err => {\n        console.log(err);\n        setIsAuth(!isAuth);\n      });\n    };\n    isLogged();\n  }, [isAuth]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: isAuth ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(UserProfile, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, this);\n};\n_s(Profile, \"7AhDuDzr3waRzffASiLSpoc3DI0=\");\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["useEffect","useState","React","Navigate","axios","NavBar","UserProfile","Profile","document","body","classList","remove","add","isAuth","setIsAuth","isLogged","method","url","process","env","REACT_APP_API_URL","withCredentials","then","res","status","catch","err","console","log"],"sources":["/home/yacboukhari/Projects/P7./frontend/src/pages/Profile.js"],"sourcesContent":["import { useEffect, useState, React } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport NavBar from \"../components/NavBar\";\nimport UserProfile from \"../components/profil/UserProfile\";\n\nconst Profile = () => {\n  useEffect(() => {\n    // Utilisation du hook d'effet en enlevant la classe non voulue au body au profit d'une nouvelle classe.\n    document.body.classList.remove(\"login\", \"signup\");\n    document.body.classList.add(\"dashboard\", \"profile\");\n  }, []);\n\n  // vérification de la connection utilisateur\n  const [isAuth, setIsAuth] = useState(true);\n  useEffect(() => {\n    const isLogged = async () => {\n      await axios({\n        method: \"get\",\n        url: `${process.env.REACT_APP_API_URL}/jwtid`,\n        withCredentials: true,\n      })\n        .then((res) => {\n          if (res.status === 200) {\n            setIsAuth(isAuth);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          setIsAuth(!isAuth);\n        });\n    };\n    isLogged();\n  }, [isAuth]);\n\n  return (\n    <div>\n      {/* si l'utilisateur a un token il aura accès au profil utilisateur, si non il sera redirigé vers la page de connexion */}\n      {isAuth ? (\n        <div>\n          <NavBar />\n          <UserProfile />\n        </div>\n      ) : (\n        <Navigate to=\"/\" />\n      )}\n    </div>\n  );\n};\n\nexport default Profile;\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,EAAEC,KAAK,QAAQ,OAAO;AAClD,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,sBAAsB;AACzC,OAAOC,WAAW,MAAM,kCAAkC;AAAC;AAE3D,MAAMC,OAAO,GAAG,MAAM;EAAA;EACpBP,SAAS,CAAC,MAAM;IACd;IACAQ,QAAQ,CAACC,IAAI,CAACC,SAAS,CAACC,MAAM,CAAC,OAAO,EAAE,QAAQ,CAAC;IACjDH,QAAQ,CAACC,IAAI,CAACC,SAAS,CAACE,GAAG,CAAC,WAAW,EAAE,SAAS,CAAC;EACrD,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAC1CD,SAAS,CAAC,MAAM;IACd,MAAMe,QAAQ,GAAG,YAAY;MAC3B,MAAMX,KAAK,CAAC;QACVY,MAAM,EAAE,KAAK;QACbC,GAAG,EAAG,GAAEC,OAAO,CAACC,GAAG,CAACC,iBAAkB,QAAO;QAC7CC,eAAe,EAAE;MACnB,CAAC,CAAC,CACCC,IAAI,CAAEC,GAAG,IAAK;QACb,IAAIA,GAAG,CAACC,MAAM,KAAK,GAAG,EAAE;UACtBV,SAAS,CAACD,MAAM,CAAC;QACnB;MACF,CAAC,CAAC,CACDY,KAAK,CAAEC,GAAG,IAAK;QACdC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;QAChBZ,SAAS,CAAC,CAACD,MAAM,CAAC;MACpB,CAAC,CAAC;IACN,CAAC;IACDE,QAAQ,EAAE;EACZ,CAAC,EAAE,CAACF,MAAM,CAAC,CAAC;EAEZ,oBACE;IAAA,UAEGA,MAAM,gBACL;MAAA,wBACE,QAAC,MAAM;QAAA;QAAA;QAAA;MAAA,QAAG,eACV,QAAC,WAAW;QAAA;QAAA;QAAA;MAAA,QAAG;IAAA;MAAA;MAAA;MAAA;IAAA,QACX,gBAEN,QAAC,QAAQ;MAAC,EAAE,EAAC;IAAG;MAAA;MAAA;MAAA;IAAA;EACjB;IAAA;IAAA;IAAA;EAAA,QACG;AAEV,CAAC;AAAC,GA1CIN,OAAO;AAAA,KAAPA,OAAO;AA4Cb,eAAeA,OAAO;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"/home/yacboukhari/Projects/P7./frontend/src/components/profil/ModalDelAccount.js\",\n  _s = $RefreshSig$();\nimport { React, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport axios from \"axios\";\nimport cookie from \"js-cookie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ModalDelAccount = () => {\n  _s();\n  //utilisation de la fonction modal afin de créer une fenêtre pop-up en utilisant le hook useState.\n  const [modalDelAccount, setModalDelAccount] = useState(true);\n\n  // puisque setModal est false il devient true et inversement\n  const toggleModalDelAccount = () => {\n    setModalDelAccount(!modalDelAccount);\n  };\n  const userData = useSelector(state => state.userReducer);\n\n  // retrait du cookie\n  const removeCookie = key => {\n    if (window !== \"undefined\") {\n      cookie.remove(key, {\n        expires: 1\n      });\n    }\n  };\n\n  //suppression du compte utilisateur\n  const delUser = () => {\n    axios({\n      method: \"delete\",\n      url: `${process.env.REACT_APP_API_URL}/api/auth/${userData._id}`,\n      withCredentials: true\n    }).then(res => {\n      removeCookie(\"jwt\");\n    }).catch(err => {\n      console.log(err);\n    });\n    window.location = \"/\";\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: modalDelAccount && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overlay\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content modal-del\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          id: \"modal-title\",\n          children: \"Voulez-vous supprimer le compte ?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btn-ctn btn-flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn\",\n            onClick: delUser,\n            children: \"Supprimer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-cancel\",\n            onClick: toggleModalDelAccount,\n            children: \"Annuler\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n_s(ModalDelAccount, \"jpUb/9KmFPSSQvA6kuNuN1DSP10=\", false, function () {\n  return [useSelector];\n});\n_c = ModalDelAccount;\nexport default ModalDelAccount;\nvar _c;\n$RefreshReg$(_c, \"ModalDelAccount\");","map":{"version":3,"names":["React","useState","useSelector","axios","cookie","ModalDelAccount","modalDelAccount","setModalDelAccount","toggleModalDelAccount","userData","state","userReducer","removeCookie","key","window","remove","expires","delUser","method","url","process","env","REACT_APP_API_URL","_id","withCredentials","then","res","catch","err","console","log","location"],"sources":["/home/yacboukhari/Projects/P7./frontend/src/components/profil/ModalDelAccount.js"],"sourcesContent":["import { React, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport axios from \"axios\";\nimport cookie from \"js-cookie\";\n\nconst ModalDelAccount = () => {\n  //utilisation de la fonction modal afin de créer une fenêtre pop-up en utilisant le hook useState.\n  const [modalDelAccount, setModalDelAccount] = useState(true);\n\n  // puisque setModal est false il devient true et inversement\n  const toggleModalDelAccount = () => {\n    setModalDelAccount(!modalDelAccount);\n  };\n\n  const userData = useSelector((state) => state.userReducer);\n\n  // retrait du cookie\n  const removeCookie = (key) => {\n    if (window !== \"undefined\") {\n      cookie.remove(key, { expires: 1 });\n    }\n  };\n\n  //suppression du compte utilisateur\n  const delUser = () => {\n    axios({\n      method: \"delete\",\n      url: `${process.env.REACT_APP_API_URL}/api/auth/${userData._id}`,\n      withCredentials: true,\n    })\n      .then((res) => {\n        removeCookie(\"jwt\");\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    window.location = \"/\";\n  };\n\n  return (\n    <div>\n      {/* Implémentation du \"short circuit condition\" afin de montrer ou cacher les éléments lorsque la condition (modal) est remplie.\n      Peut etre considéré comme une version minifié d'un opérateur ternaire. */}\n      {modalDelAccount && (\n        <div className=\"modal\">\n          <div className=\"overlay\"></div>\n          <div className=\"modal-content modal-del\">\n            <h1 id=\"modal-title\">Voulez-vous supprimer le compte ?</h1>\n            <div className=\"btn-ctn btn-flex\">\n              <button type=\"button\" className=\"btn\" onClick={delUser}>\n                Supprimer\n              </button>\n              <button\n                type=\"button\"\n                className=\"btn btn-cancel\"\n                onClick={toggleModalDelAccount}\n              >\n                Annuler\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ModalDelAccount;\n"],"mappings":";;AAAA,SAASA,KAAK,EAAEC,QAAQ,QAAQ,OAAO;AACvC,SAASC,WAAW,QAAQ,aAAa;AACzC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,WAAW;AAAC;AAE/B,MAAMC,eAAe,GAAG,MAAM;EAAA;EAC5B;EACA,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;;EAE5D;EACA,MAAMO,qBAAqB,GAAG,MAAM;IAClCD,kBAAkB,CAAC,CAACD,eAAe,CAAC;EACtC,CAAC;EAED,MAAMG,QAAQ,GAAGP,WAAW,CAAEQ,KAAK,IAAKA,KAAK,CAACC,WAAW,CAAC;;EAE1D;EACA,MAAMC,YAAY,GAAIC,GAAG,IAAK;IAC5B,IAAIC,MAAM,KAAK,WAAW,EAAE;MAC1BV,MAAM,CAACW,MAAM,CAACF,GAAG,EAAE;QAAEG,OAAO,EAAE;MAAE,CAAC,CAAC;IACpC;EACF,CAAC;;EAED;EACA,MAAMC,OAAO,GAAG,MAAM;IACpBd,KAAK,CAAC;MACJe,MAAM,EAAE,QAAQ;MAChBC,GAAG,EAAG,GAAEC,OAAO,CAACC,GAAG,CAACC,iBAAkB,aAAYb,QAAQ,CAACc,GAAI,EAAC;MAChEC,eAAe,EAAE;IACnB,CAAC,CAAC,CACCC,IAAI,CAAEC,GAAG,IAAK;MACbd,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC,CAAC,CACDe,KAAK,CAAEC,GAAG,IAAK;MACdC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IAClB,CAAC,CAAC;IAEJd,MAAM,CAACiB,QAAQ,GAAG,GAAG;EACvB,CAAC;EAED,oBACE;IAAA,UAGGzB,eAAe,iBACd;MAAK,SAAS,EAAC,OAAO;MAAA,wBACpB;QAAK,SAAS,EAAC;MAAS;QAAA;QAAA;QAAA;MAAA,QAAO,eAC/B;QAAK,SAAS,EAAC,yBAAyB;QAAA,wBACtC;UAAI,EAAE,EAAC,aAAa;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAAuC,eAC3D;UAAK,SAAS,EAAC,kBAAkB;UAAA,wBAC/B;YAAQ,IAAI,EAAC,QAAQ;YAAC,SAAS,EAAC,KAAK;YAAC,OAAO,EAAEW,OAAQ;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAE9C,eACT;YACE,IAAI,EAAC,QAAQ;YACb,SAAS,EAAC,gBAAgB;YAC1B,OAAO,EAAET,qBAAsB;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAGxB;QAAA;UAAA;UAAA;UAAA;QAAA,QACL;MAAA;QAAA;QAAA;QAAA;MAAA,QACF;IAAA;MAAA;MAAA;MAAA;IAAA;EAET;IAAA;IAAA;IAAA;EAAA,QACG;AAEV,CAAC;AAAC,GA7DIH,eAAe;EAAA,QASFH,WAAW;AAAA;AAAA,KATxBG,eAAe;AA+DrB,eAAeA,eAAe;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
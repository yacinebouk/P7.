{"ast":null,"code":"import axios from \"axios\";\n\n// Pour récupérer les données de l'utilisateur connecté\nexport const GET_USER = \"GET_USER\";\nexport const UPLOAD_PICTURE = \"UPLOAD_PICTURE\";\nexport const GET_USER_ERRORS = \"GET_USER_ERRORS\";\nexport const getUser = userId => {\n  return dispatch => {\n    return axios\n    //récupération des données de l'utilisateur\n    .get(`${process.env.REACT_APP_API_URL}/api/auth/${userId}`, {\n      withCredentials: true\n    })\n    //utilisation de la méthode dispatch pour envoyer des données vers le reducer\n    .then(res => {\n      dispatch({\n        type: GET_USER,\n        payload: res.data\n      });\n    }).catch(err => console.log(err));\n  };\n};\nexport const uploadPic = (data, id) => {\n  return dispatch => {\n    return axios.post(`${process.env.REACT_APP_API_URL}/api/auth/upload`, data, {\n      withCredentials: true\n    }).then(res => {\n      if (res.data.errors) {\n        dispatch({\n          type: GET_USER_ERRORS,\n          payload: res.data.errors\n        });\n      } else {\n        dispatch({\n          type: GET_USER_ERRORS,\n          payload: \"\"\n        });\n        return axios.get(`${process.env.REACT_APP_API_URL}/api/auth/${id}`).then(res => {\n          dispatch({\n            type: UPLOAD_PICTURE,\n            payload: res.data.picture\n          });\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n      if (err.response.data.errors) {\n        dispatch({\n          type: GET_USER_ERRORS,\n          payload: err.response.data.errors\n        });\n      } else {\n        dispatch({\n          type: GET_USER_ERRORS,\n          payload: \"\"\n        });\n      }\n    });\n  };\n};","map":{"version":3,"names":["axios","GET_USER","UPLOAD_PICTURE","GET_USER_ERRORS","getUser","userId","dispatch","get","process","env","REACT_APP_API_URL","withCredentials","then","res","type","payload","data","catch","err","console","log","uploadPic","id","post","errors","picture","response"],"sources":["/home/yacboukhari/Projects/P7./frontend/src/actions/user.actions.js"],"sourcesContent":["import axios from \"axios\";\n\n// Pour récupérer les données de l'utilisateur connecté\nexport const GET_USER = \"GET_USER\";\nexport const UPLOAD_PICTURE = \"UPLOAD_PICTURE\";\n\nexport const GET_USER_ERRORS = \"GET_USER_ERRORS\";\n\nexport const getUser = (userId) => {\n  return (dispatch) => {\n    return (\n      axios\n        //récupération des données de l'utilisateur\n        .get(`${process.env.REACT_APP_API_URL}/api/auth/${userId}`, {\n          withCredentials: true,\n        })\n        //utilisation de la méthode dispatch pour envoyer des données vers le reducer\n        .then((res) => {\n          dispatch({ type: GET_USER, payload: res.data });\n        })\n        .catch((err) => console.log(err))\n    );\n  };\n};\n\nexport const uploadPic = (data, id) => {\n  return (dispatch) => {\n    return axios\n      .post(`${process.env.REACT_APP_API_URL}/api/auth/upload`, data, {\n        withCredentials: true,\n      })\n      .then((res) => {\n        if (res.data.errors) {\n          dispatch({ type: GET_USER_ERRORS, payload: res.data.errors });\n        } else {\n          dispatch({ type: GET_USER_ERRORS, payload: \"\" });\n          return axios\n            .get(`${process.env.REACT_APP_API_URL}/api/auth/${id}`)\n            .then((res) => {\n              dispatch({ type: UPLOAD_PICTURE, payload: res.data.picture });\n            });\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        if (err.response.data.errors) {\n          dispatch({\n            type: GET_USER_ERRORS,\n            payload: err.response.data.errors,\n          });\n        } else {\n          dispatch({ type: GET_USER_ERRORS, payload: \"\" });\n        }\n      });\n  };\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,OAAO,MAAMC,QAAQ,GAAG,UAAU;AAClC,OAAO,MAAMC,cAAc,GAAG,gBAAgB;AAE9C,OAAO,MAAMC,eAAe,GAAG,iBAAiB;AAEhD,OAAO,MAAMC,OAAO,GAAIC,MAAM,IAAK;EACjC,OAAQC,QAAQ,IAAK;IACnB,OACEN;IACE;IAAA,CACCO,GAAG,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,iBAAkB,aAAYL,MAAO,EAAC,EAAE;MAC1DM,eAAe,EAAE;IACnB,CAAC;IACD;IAAA,CACCC,IAAI,CAAEC,GAAG,IAAK;MACbP,QAAQ,CAAC;QAAEQ,IAAI,EAAEb,QAAQ;QAAEc,OAAO,EAAEF,GAAG,CAACG;MAAK,CAAC,CAAC;IACjD,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;EAEvC,CAAC;AACH,CAAC;AAED,OAAO,MAAMG,SAAS,GAAG,CAACL,IAAI,EAAEM,EAAE,KAAK;EACrC,OAAQhB,QAAQ,IAAK;IACnB,OAAON,KAAK,CACTuB,IAAI,CAAE,GAAEf,OAAO,CAACC,GAAG,CAACC,iBAAkB,kBAAiB,EAAEM,IAAI,EAAE;MAC9DL,eAAe,EAAE;IACnB,CAAC,CAAC,CACDC,IAAI,CAAEC,GAAG,IAAK;MACb,IAAIA,GAAG,CAACG,IAAI,CAACQ,MAAM,EAAE;QACnBlB,QAAQ,CAAC;UAAEQ,IAAI,EAAEX,eAAe;UAAEY,OAAO,EAAEF,GAAG,CAACG,IAAI,CAACQ;QAAO,CAAC,CAAC;MAC/D,CAAC,MAAM;QACLlB,QAAQ,CAAC;UAAEQ,IAAI,EAAEX,eAAe;UAAEY,OAAO,EAAE;QAAG,CAAC,CAAC;QAChD,OAAOf,KAAK,CACTO,GAAG,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,iBAAkB,aAAYY,EAAG,EAAC,CAAC,CACtDV,IAAI,CAAEC,GAAG,IAAK;UACbP,QAAQ,CAAC;YAAEQ,IAAI,EAAEZ,cAAc;YAAEa,OAAO,EAAEF,GAAG,CAACG,IAAI,CAACS;UAAQ,CAAC,CAAC;QAC/D,CAAC,CAAC;MACN;IACF,CAAC,CAAC,CACDR,KAAK,CAAEC,GAAG,IAAK;MACdC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAChB,IAAIA,GAAG,CAACQ,QAAQ,CAACV,IAAI,CAACQ,MAAM,EAAE;QAC5BlB,QAAQ,CAAC;UACPQ,IAAI,EAAEX,eAAe;UACrBY,OAAO,EAAEG,GAAG,CAACQ,QAAQ,CAACV,IAAI,CAACQ;QAC7B,CAAC,CAAC;MACJ,CAAC,MAAM;QACLlB,QAAQ,CAAC;UAAEQ,IAAI,EAAEX,eAAe;UAAEY,OAAO,EAAE;QAAG,CAAC,CAAC;MAClD;IACF,CAAC,CAAC;EACN,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}
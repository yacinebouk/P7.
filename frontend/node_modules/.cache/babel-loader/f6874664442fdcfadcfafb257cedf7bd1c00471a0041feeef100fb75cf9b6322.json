{"ast":null,"code":"var _jsxFileName = \"/home/yacboukhari/Projects/P7./frontend/src/components/dashboard/LikeButton.js\",\n  _s = $RefreshSig$();\nimport { React, useState, useEffect, useContext } from \"react\";\nimport { Context } from \"../Context\";\nimport { useDispatch } from \"react-redux\";\nimport { likePost, unlikePost } from \"../../actions/post.actions\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faHeart } from \"@fortawesome/free-solid-svg-icons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LikeButton = _ref => {\n  _s();\n  let {\n    post\n  } = _ref;\n  const [isLiked, setIsLiked] = useState(false);\n  const userId = useContext(Context);\n  const dispatch = useDispatch();\n  const like = () => {\n    dispatch(likePost(post._id, userId));\n    setIsLiked(true);\n  };\n  const unlike = () => {\n    dispatch(unlikePost(post._id, userId));\n    setIsLiked(false);\n  };\n\n  // si l'id de l'utilisateur est parmi ceux qui ont liké le post, setIsLiked devient true\n  // le useEffect est relancé lorsque sont trouvés l'id utilisateur, le tableau des utilisateurs ayant liké le post et lorsque isLiked est incrémenté\n  useEffect(() => {\n    if (post.likers.includes(userId)) setIsLiked(true);else setIsLiked(false);\n  }, [userId, post.likers, isLiked]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"like-container\",\n      children: [userId && isLiked === false && /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        className: \"unlike-icon\",\n        icon: faHeart,\n        onClick: like\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 11\n      }, this), userId && isLiked && /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        className: \"like-icon\",\n        icon: faHeart,\n        onClick: unlike\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"like-num\",\n        children: post.likers.length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n};\n_s(LikeButton, \"qCWW1bYRy7u0fZXy2/LkNyI0M3s=\", false, function () {\n  return [useDispatch];\n});\n_c = LikeButton;\nexport default LikeButton;\nvar _c;\n$RefreshReg$(_c, \"LikeButton\");","map":{"version":3,"names":["React","useState","useEffect","useContext","Context","useDispatch","likePost","unlikePost","FontAwesomeIcon","faHeart","LikeButton","post","isLiked","setIsLiked","userId","dispatch","like","_id","unlike","likers","includes","length"],"sources":["/home/yacboukhari/Projects/P7./frontend/src/components/dashboard/LikeButton.js"],"sourcesContent":["import { React, useState, useEffect, useContext } from \"react\";\nimport { Context } from \"../Context\";\nimport { useDispatch } from \"react-redux\";\nimport { likePost, unlikePost } from \"../../actions/post.actions\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faHeart } from \"@fortawesome/free-solid-svg-icons\";\n\nconst LikeButton = ({ post }) => {\n  const [isLiked, setIsLiked] = useState(false);\n  const userId = useContext(Context);\n  const dispatch = useDispatch();\n\n  const like = () => {\n    dispatch(likePost(post._id, userId));\n    setIsLiked(true);\n  };\n  const unlike = () => {\n    dispatch(unlikePost(post._id, userId));\n    setIsLiked(false);\n  };\n\n  // si l'id de l'utilisateur est parmi ceux qui ont liké le post, setIsLiked devient true\n  // le useEffect est relancé lorsque sont trouvés l'id utilisateur, le tableau des utilisateurs ayant liké le post et lorsque isLiked est incrémenté\n  useEffect(() => {\n    if (post.likers.includes(userId)) setIsLiked(true);\n    else setIsLiked(false);\n  }, [userId, post.likers, isLiked]);\n\n  return (\n    <div>\n      <div className=\"like-container\">\n        {userId && isLiked === false && (\n          <FontAwesomeIcon\n            className=\"unlike-icon\"\n            icon={faHeart}\n            onClick={like}\n          />\n        )}\n        {userId && isLiked && (\n          <FontAwesomeIcon\n            className=\"like-icon\"\n            icon={faHeart}\n            onClick={unlike}\n          />\n        )}\n        <p className=\"like-num\">{post.likers.length}</p>\n      </div>\n    </div>\n  );\n};\n\nexport default LikeButton;\n"],"mappings":";;AAAA,SAASA,KAAK,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AAC9D,SAASC,OAAO,QAAQ,YAAY;AACpC,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,QAAQ,EAAEC,UAAU,QAAQ,4BAA4B;AACjE,SAASC,eAAe,QAAQ,gCAAgC;AAChE,SAASC,OAAO,QAAQ,mCAAmC;AAAC;AAE5D,MAAMC,UAAU,GAAG,QAAc;EAAA;EAAA,IAAb;IAAEC;EAAK,CAAC;EAC1B,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAMa,MAAM,GAAGX,UAAU,CAACC,OAAO,CAAC;EAClC,MAAMW,QAAQ,GAAGV,WAAW,EAAE;EAE9B,MAAMW,IAAI,GAAG,MAAM;IACjBD,QAAQ,CAACT,QAAQ,CAACK,IAAI,CAACM,GAAG,EAAEH,MAAM,CAAC,CAAC;IACpCD,UAAU,CAAC,IAAI,CAAC;EAClB,CAAC;EACD,MAAMK,MAAM,GAAG,MAAM;IACnBH,QAAQ,CAACR,UAAU,CAACI,IAAI,CAACM,GAAG,EAAEH,MAAM,CAAC,CAAC;IACtCD,UAAU,CAAC,KAAK,CAAC;EACnB,CAAC;;EAED;EACA;EACAX,SAAS,CAAC,MAAM;IACd,IAAIS,IAAI,CAACQ,MAAM,CAACC,QAAQ,CAACN,MAAM,CAAC,EAAED,UAAU,CAAC,IAAI,CAAC,CAAC,KAC9CA,UAAU,CAAC,KAAK,CAAC;EACxB,CAAC,EAAE,CAACC,MAAM,EAAEH,IAAI,CAACQ,MAAM,EAAEP,OAAO,CAAC,CAAC;EAElC,oBACE;IAAA,uBACE;MAAK,SAAS,EAAC,gBAAgB;MAAA,WAC5BE,MAAM,IAAIF,OAAO,KAAK,KAAK,iBAC1B,QAAC,eAAe;QACd,SAAS,EAAC,aAAa;QACvB,IAAI,EAAEH,OAAQ;QACd,OAAO,EAAEO;MAAK;QAAA;QAAA;QAAA;MAAA,QAEjB,EACAF,MAAM,IAAIF,OAAO,iBAChB,QAAC,eAAe;QACd,SAAS,EAAC,WAAW;QACrB,IAAI,EAAEH,OAAQ;QACd,OAAO,EAAES;MAAO;QAAA;QAAA;QAAA;MAAA,QAEnB,eACD;QAAG,SAAS,EAAC,UAAU;QAAA,UAAEP,IAAI,CAACQ,MAAM,CAACE;MAAM;QAAA;QAAA;QAAA;MAAA,QAAK;IAAA;MAAA;MAAA;MAAA;IAAA;EAC5C;IAAA;IAAA;IAAA;EAAA,QACF;AAEV,CAAC;AAAC,GA1CIX,UAAU;EAAA,QAGGL,WAAW;AAAA;AAAA,KAHxBK,UAAU;AA4ChB,eAAeA,UAAU;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}